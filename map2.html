<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¨‚åœ’åœ°åœ– - å¤¢å¹»éŠæ¨‚åœ’ (Horror Ver.)</title>
    <link href="https://fonts.googleapis.com/css2?family=Creepster&family=Kaisei+Tokumin:wght@400;700;800&family=Noto+Serif+TC:wght@700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/index2_styles.css"> <link rel="stylesheet" href="css/map2_styles.css"> 
</head>
<body>

    <header>
        <div class="logo">
            <a href="index2.html"><img src="./photo/ç™½æ—¥å¤¢æ¨‚åœ’0.png" alt="éŠæ¨‚åœ’ Logo"></a>
        </div>
        <nav>
            <ul>
                <li><a href="introdution2.html">ï¼Ÿï¼Ÿï¼Ÿï¼Ÿ</a></li>
                <li><a href="map2.html" class="active">ï¼Ÿï¼Ÿï¼Ÿï¼Ÿ</a></li>
                <li><a href="guide2.html">ï¼Ÿï¼Ÿï¼Ÿï¼Ÿ</a></li>
                <li class="login-link"><a href="login2.html">ï¼Ÿï¼Ÿ</a></li>
            </ul>
        </nav>
    </header>

    <section class="map-section">
        <div class="dark-overlay"></div>

        <div class="map-wrapper">
            
            <img src="photo/åœ°åœ–åº•0.png" class="map-bg" alt="åœ°åœ–èƒŒæ™¯">

            <div class="map-title-container">
                <img src="photo/ç™½æ—¥å¤¢æ¨‚åœ’0.png" class="actual-title" alt="éŠæ¨‚åœ’">
                <img src="photo/ç´…ç·š.png" class="red-line-overlay" alt="éŠæ¨‚åœ’ç´…ç·š">
            </div>
            <a href="introdution2.html#coaster" class="map-item pos-coaster horror-filter">
                <img src="photo/é›²éœ„é£›è»Šç™½é‚Š0.png" alt="é›²éœ„é£›è»Š">
            </a>

            <a href="introdution2.html#balloon" class="map-item pos-balloon horror-filter">
                <img src="photo/ç†±æ°£çƒç™½é‚Š0.png" alt="ç†±æ°£çƒ">
            </a>

            <a href="introdution2.html#pirate-ship" class="map-item pos-ship horror-filter">
                <img src="photo/æµ·ç›œèˆ¹ç™½é‚Š0.png" alt="æµ·ç›œèˆ¹">
            </a>

            <a href="introdution2.html#ferris-wheel" class="map-item pos-wheel horror-filter">
                <img src="photo/æ‘©å¤©è¼ªç™½é‚Š0.png" alt="æ‘©å¤©è¼ª">
            </a>

            <a href="introdution2.html#carousel" class="map-item pos-pony horror-filter">
                <img src="photo/æœ¨é¦¬ç™½é‚Š0.png" alt="å°é¦¬">
            </a>
        </div>
    </section>

    <audio id="bgm" loop>
        <source src="music/bgm.mp3" type="audio/mpeg">
    </audio>

    <button id="music-toggle" class="music-btn">ğŸµ éŸ³æ¨‚ï¼šé—œ</button>

    <script>
        (function() {
            var audio = document.getElementById("bgm");
            var btn = document.getElementById("music-toggle");
            var isPlaying = localStorage.getItem("musicPlaying") === "true";
            var savedTime = localStorage.getItem("musicTime");

            if (savedTime) audio.currentTime = parseFloat(savedTime);

            if (isPlaying) {
                var playPromise = audio.play();
                if (playPromise !== undefined) {
                    playPromise.then(function() { updateBtn(true); }).catch(function(error) { updateBtn(false); });
                }
            }

            btn.addEventListener("click", function() {
                if (audio.paused) { audio.play(); updateBtn(true); } 
                else { audio.pause(); updateBtn(false); }
            });

            window.addEventListener("beforeunload", function() {
                if (!audio.paused) localStorage.setItem("musicTime", audio.currentTime);
            });

            function updateBtn(playing) {
                if (playing) {
                    btn.innerHTML = "ğŸ¶ éŸ³æ¨‚ï¼šé–‹";
                    btn.classList.add("playing");
                    localStorage.setItem("musicPlaying", "true");
                } else {
                    btn.innerHTML = "ğŸµ éŸ³æ¨‚ï¼šé—œ";
                    btn.classList.remove("playing");
                    localStorage.setItem("musicPlaying", "false");
                }
            }
        })();
    </script>


</body>
</html>