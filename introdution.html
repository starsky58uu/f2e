<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>設施介紹 - 夢幻遊樂園</title>
    <link rel="stylesheet" href="css/index_styles.css">
    <link rel="stylesheet" href="css/introdution_styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dela+Gothic+One&family=Yusei+Magic&family=Zen+Maru+Gothic:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>

    <header>
        <div class="logo">
            <a href="index.html">
                <img src="photo/main-title.png" alt="遊樂園 Logo">
            </a>
        </div>
        <div class="hamburger-menu">
            <span></span>
            <span></span>
            <span></span>
        </div>
        <nav>
            <ul>
                <li><a href="introdution.html" class="active">設施介紹</a></li>
                <li><a href="map.html">樂園地圖</a></li>
                <li><a href="guide.html">遊園指南</a></li>
                <li class="login-link"><a href="login.html">登入</a></li>
            </ul>
        </nav>
    </header>

    <section class="guide-container" id="ferris-wheel">
        <div class="guide-visual">
            <div class="ferris-wheel-group">
                <img src="photo/ferris-wheel3.png" class="fw-base" alt="摩天輪底座">
                <img src="photo/ferris-wheel4.png" class="fw-spinner" alt="摩天輪轉盤">
            </div>
        </div>
        <div class="guide-info">
            <h2 class="guide-title">摩天輪</h2>
            <p class="description">
                想換個角度看世界嗎？踏入摩天輪，開啟一場地平線之上的旅行。在數十分鐘的緩慢升降中，你可以盡情捕捉城市的全景，無論是藍天白雲下的壯麗，還是華燈初上時的璀璨。摩天輪不僅是一場高度的體驗，更是一個與愛人、家人共享美好時光的私密空間。
            </p>
            <p class="note">注意：120cm以下孩童需有父母陪同</p>
        </div>
    </section>

    <section class="guide-container" id="pirate-ship">
        <div class="guide-visual">
            <div class="pirate-ship-group">
                <img src="photo/pirate-ship3.png" class="ps-base" alt="海盜船底座">
                <img src="photo/pirate-ship2.png" class="ps-swing" alt="海盜船轉盤">
            </div>
        </div>
        <div class="guide-info">
            <h2 class="guide-title">海盜船</h2>
            <p class="description">
                ​在浪潮之巔，感受極致的起伏與自由。這是一場關於勇氣與重力的優雅博弈。隨著巨大的船身緩緩擺盪，妳將在每一次的推升中，體會到指尖觸碰雲端的輕盈；在每一次的俯衝裡，感受風在耳邊疾馳的暢快。
            </p>
            <p class="note">注意:120cm以下孩童以及孕婦禁止搭乘</p>
        </div>
    </section>

    <section class="guide-container" id="carousel">
        <div class="guide-visual">
            <div class="carousel-group">
                <img src="photo/旋轉竿.png" class="carousel-pole" alt="木馬底座">
                <img src="photo/木馬.png" class="carousel-horse" alt="旋轉木馬">
            </div>
        </div>
        <div class="guide-info">
            <h2 class="guide-title">旋轉木馬</h2>
            <p class="description">
                ​在流光溢彩中，重拾純粹的悸動。伴隨著輕快的圓舞曲與溫暖燈火，旋轉木馬帶著妳優雅地進入一場永不落幕的夢境。這不只是遊樂園的經典，更是一段可以逃離現實、讓心靈放鬆的治癒時光。
            </p>
            <p class="note">注意： 120cm 以下孩童需由成人陪同</p>
        </div>
    </section>

    <section class="guide-container" id="balloon">
        <div class="guide-visual">
            <div class="balloon-group">
                <img src="photo/balloon1.png" class="balloon-img" alt="熱氣球">
            </div>
        </div>
        <div class="guide-info">
            <h2 class="guide-title">熱氣球</h2>
            <p class="description">
                與風對話，開啟一段不設限的自由漂浮。捨棄了軌道的束縛，熱氣球帶領妳進入一個完全靜謐的高空領域。隨著噴火器規律的低鳴，妳將緩緩脫離地心引力，感受身體與心靈同步輕盈的奇妙瞬間，彷彿成為這片天際中，最自由的一朵雲
            </p>
            <p class="note">注意：120cm以下孩童以及孕婦禁止搭乘</p>
        </div>
    </section>

    <section class="guide-container" id="coaster">
        <div class="guide-visual">
            <div class="coaster-group">
                <img src="photo/-rollercoaster1.png" class="coaster-img" alt="雲霄飛車">
            </div>
        </div>
        <div class="guide-info">
            <h2 class="guide-title">雲霄飛車</h2>
            <p class="description">
                穿梭於現實與虛幻間的流星。這是一場獻給追求極致感官者的速度巡禮。當鋼軌與車輪交織出規律的節奏，妳將隨著流暢的線條俯衝、旋轉，在重力加速的瞬間，感受感官被完全釋放的純粹快感。
            </p>
            <p class="note">注意：120cm以下孩童以及孕婦禁止搭乘</p>
        </div>
    </section>

    <audio id="bgm" loop>
        <source src="music/bgm.mp3" type="audio/mpeg">
    </audio>

    <button id="music-toggle" class="music-btn">🎵 音樂：關</button>

    <script>
        (function() {
            var audio = document.getElementById("bgm");
            var btn = document.getElementById("music-toggle");
            
            // 1. 讀取之前的狀態 (是否播放中)
            var isPlaying = localStorage.getItem("musicPlaying") === "true";
            
            // 2. 讀取之前的播放時間 (這是新加的！)
            var savedTime = localStorage.getItem("musicTime");

            // 如果有紀錄時間，就設定過去 (讓音樂接關)
            if (savedTime) {
                audio.currentTime = parseFloat(savedTime);
            }

            // 如果之前是開著的，嘗試自動播放
            if (isPlaying) {
                var playPromise = audio.play();
                if (playPromise !== undefined) {
                    playPromise.then(function() {
                        updateBtn(true);
                    }).catch(function(error) {
                        console.log("瀏覽器阻擋自動播放，等待使用者點擊");
                        updateBtn(false);
                    });
                }
            }

            // 按鈕點擊事件
            btn.addEventListener("click", function() {
                if (audio.paused) {
                    audio.play();
                    updateBtn(true);
                } else {
                    audio.pause();
                    updateBtn(false);
                }
            });

            // 3. 關鍵步驟：當使用者離開頁面時，記錄現在播到第幾秒
            window.addEventListener("beforeunload", function() {
                // 只有在播放時才紀錄時間，避免下次進來從奇怪的地方開始
                if (!audio.paused) {
                    localStorage.setItem("musicTime", audio.currentTime);
                }
            });

            // 更新按鈕外觀 & 儲存播放狀態
            function updateBtn(playing) {
                if (playing) {
                    btn.innerHTML = "🎶 音樂：開";
                    btn.classList.add("playing");
                    localStorage.setItem("musicPlaying", "true");
                } else {
                    btn.innerHTML = "🎵 音樂：關";
                    btn.classList.remove("playing");
                    localStorage.setItem("musicPlaying", "false");
                }
            }
        })();
    </script>
</body>
</html>